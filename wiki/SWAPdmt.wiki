#labels swapdmt,swap
*SWAPdmt, Device Management Tool for SWAP networks.*

 * [SWAPdmt#Introduction Introduction]
 * [SWAPdmt#Serial_port Serial port]
 * [SWAPdmt#Serial_gateway_network_settings Serial gateway network settings]
 * [SWAPdmt#Identify_SWAP_devices Identify SWAP devices]
 * [SWAPdmt#Device_network_settings Device network settings]
 * [SWAPdmt#Configuring_custom_settings Configuring custom settings]


= Introduction =
SWAPdmt is a software tool, written in Python, for configuring SWAP devices wirelessly. There is a command-line version and a graphical one (wxPython).  The current tutorial will focus on the GUI version only. SWAPdmt basically acts as a remote editor for any register belonging to any of the wireless devices (motes) within the same SWAP network.

SWAPdmt lets us configure the following parameters:

 * Serial port settings on the modem (serial interface).
 * Network settings on the modem: frequency channel, network ID, address and security options.
 * Network settings on any mote: frequency channel, network ID, address, security options and periodic Tx interval.
 * Custom registers on any mote

Besides, SWAPdmt identifies any SWAP mote on the network (with the same frequency channel and network id as the modem) and monitors the network, providing feedback for register values and device addresses.


= Serial port =
In order to connect SWAPdmt to the network, a SWAP wireless gateway must be available on the computer. At the moment of writing this document only panStick or a usb/serial panStamp can be used as SWAP interfaces. The SWAP modem communicates with the computer via serial port (a real serial port or a virtual one) so before pressing the “Connect” button you should check the serial settings.

<p align="center">
https://lh4.googleusercontent.com/-Fy8AqJA5yPw/TjLgRI2hTLI/AAAAAAAABDg/XGMORe7eTt8/dmtserial.png
</p>
<p align="center">
Figure 1: Serial port settings
</p>

Once the serial port configured, you can connect SWAPdmt to the wireless network.


= Serial gateway network settings =
SWAPdmt can only be connected to a single SWAP network at the same time. This said, specific network parameter for the management tool can be configured from _Gateway->Network_. Frequency channel, network id, device address and security can be directly changed from this menu.

<p align="center">
https://lh4.googleusercontent.com/-knVNvij9a6M/TjLgQcbwNmI/AAAAAAAABDU/juv98EPwORo/dmtgtwynet.png
</p>
<p align="center">
Figure 2: Serial gateway network settings
</p>


= Identify SWAP devices =
Once SWAPdmt is connected to the wireless network, it continuously listens to broadcasted status packets as a way of identifying new devices. SWAPdmt sends queries in order to get the product code from the existing motes and checks these codes against the database of device description files (xml). This procedure lets SWAPdmt automatically discover devices, identifying them and their respective I/O resources.

<p align="center">
https://lh4.googleusercontent.com/-OpLZU8TMpDs/TjLgQ2Pq5pI/AAAAAAAABDY/EWqK9sD3BTk/dmtmain.png
</p>
<p align="center">
Figure 3: Main SWAPdmt window. Wireless devices being discovered by the management tool
</p>


= Device network settings =
_Devices->Network_ opens a configuration window that lets you configure the configuration registers that have to do with network connectivity on each wireless device (mote). Frequency channel, network id, device address, security and Tx interval are the most important network parameters when you need to add new motes to a SWAP network. Just remember that in order to connect to a given wireless device, SWAP gateway and wireless device must share the same network parameters, except address, that must be different.

As a side note, SWAP devices, including serial gateways, can take any address from 1 to 255. 0 is reserved as broadcast address.

<p align="center">
https://lh3.googleusercontent.com/-N6ecsK5VQug/TjLgQcyXTVI/AAAAAAAABDQ/PCjzx3PaMgc/dmtdevnet.png
</p>
<p align="center">
Figure 4: Device network settings
</p>

After pressing _OK_ SWAPdmt checks the availability of the wireless device. If the device is supposed to be sleeping – mostly happening on battery-operated devices – the user will be prompted to manually put the device into _SYNC_ mode. This action will awake the wireless mote from its sleeping state and will let the mote receive the necessary wireless commands before leaving the _SYNC_ state again.


= Configuring custom settings =

The configuration procedure is quite straightforward. First click on Devices->Custom Settings and then select "your wireless device from the list. This action will tell SWAPdmt which settings to edit. Then, the configuration tool will sequentially prompt the user for the required values. At the end, SWAPdmt will ask the user to put his device in SYNC mode, probably pressing a button.

The magics behind this procedure resides in the creation of a XML definition file for each type of mote. Every XML file defines the position of each register within the device, bit length, data type and the way to filter the user input.

<p align="center">
https://lh6.googleusercontent.com/-c4IO8UkIlq4/TjLgQdu-4sI/AAAAAAAABDM/XBe6xi4ck60/dmtchronos.png
<p align="center">
Figure 5: ez430-Chronos custom settings dialog
</p>